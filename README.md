# disk_shrink

### 使用

./disk_shrink.py --shrink dir

- 不带 skrink 参数只扫描目录重复文件，不执行其它操作

### 行为
扫描目录，寻找相同的文件，删掉重复文件，再拷贝回来

### 原理
文件系统支持 COW，故相同文件删除重新拷贝后，就会只占用一份空间

### 其它
与硬链接的差异：实际是不同的 inode，修改其中一个文件，其它文件不会跟着变

### 问题
- 文件创建时间未回复
- 无法识别已经收缩过的文件，第二次执行无意义

### TODO
- 文件创建时间恢复
- 多线程优化
- 其它文件系统支持
- 识别已经是合并过存储空间的文件

---

程序为 Trae 生成，全程只打字要求 AI 改这改那，也就这样了
